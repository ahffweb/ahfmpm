<section data-ng-controller="ProjectsController">
  <form name="projectForm" class="col-md-12" role="form" data-ng-submit="create(projectForm.$valid)" data-ng-init="itemCount = 0"novalidate>
   <h2 class="text-center">Project Request</h2>
   <br>
    <!--
    General Project Information
    -->
    <h5 class="text-center">General Information</h5>
    <hr>
    <div class="row">
      <div class="col-md-6">
          <div class="form-group" ng-class="{ 'has-error' : submitted && projectForm.projectName.$invalid }">
            <label mean-token="'create-projectName'" class="control-label">Project Name<span class="error">*</span></label>
            <div>
              <input name="projectName" type="text" class="form-control" data-ng-model="projectName" id="projectName" placeholder="Project Name" required>
              <div ng-show="submitted && projectForm.projectName.$invalid" class="help-block">
                <p ng-show="projectForm.projectName.$error.required">Project name is required</p>
              </div>
            </div>
          </div>

          <div class="form-group" ng-class="{ 'has-error' : submitted && projectForm.projectDescription.$invalid }">
            <label mean-token="'create-projectDescription'" class="control-label">Project Details<span class="error">*</span></label>
            <div>
              <textarea name="projectDescription" type="text" cols="30" rows="10" class="form-control" data-ng-model="projectDescription" id="projectDetails" placeholder="Explain your project needs here." required></textarea>
              <div ng-show="submitted && projectForm.projectDescription.$invalid" class="help-block">
                <p ng-show="projectForm.projectDescription.$error.required">Project description is required</p>
              </div>
            </div>
          </div>

          <div class="form-group" >
            <label mean-token="'create-projectAudience'" class="control-label">What audience are you trying to reach?</label>
            <div>
              <input name="projectAudience" type="text" class="form-control" data-ng-model="projectAudience" id="projectAudience" placeholder="EX: Clients, Providers, MSMs">
            </div>
          </div>

          <div class="form-group" >
            <label mean-token="'create-projectMessage'" class="control-label">What is the primary message you would like conveyed?</label>
            <div>
              <input name="projectMessage" type="text" class="form-control" data-ng-model="projectMessage" id="projectMessage" placeholder="EX: Safe Sex, Aids is a Civil Rights Issue">
            </div>
          </div>

      </div>

      <div class="col-md-6">

          <div class="form-group" ng-class="{ 'has-error' : submitted && projectForm.costCenter.$invalid }">
            <label mean-token="'create-costCenter'" class="control-label">Department/Cost Center<span class="error">*</span></label>
            <div>
              <input name="costCenter" type="text" class="form-control" data-ng-model="costCenter" id="costCenter" placeholder="Cost Center" required>
              <div ng-show="submitted && projectForm.costCenter.$invalid" class="help-block">
                <p ng-show="projectForm.costCenter.$error.required">Cost center is required</p>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label mean-token="'create-additionalInfo'" for="additionalInfo" class="control-label">Additional expense types and percentage breakdowns</label>
            <div>
              <textarea name="additionalInfo" data-ng-model="additionalInfo" id="additionalInfo" cols="30" rows="10" placeholder="Additional Info" class="form-control"></textarea>
              
            </div>
          </div>

          <div class="form-group" ng-class="{ 'has-error' : submitted && projectForm.departmentHeadApproving.$invalid }">
            <label mean-token="'create-departmentHeadApproving'" class="control-label">Department Head<span class="error">*</span></label>
            <div>
              <input name="departmentHeadApproving" type="text" class="form-control" data-ng-model="departmentHeadApproving" id="departmentHeadApproving" placeholder="The name of the department head approving this project" required>
              <div ng-show="submitted && projectForm.departmentHeadApproving.$invalid" class="help-block">
                <p ng-show="projectForm.departmentHeadApproving.$error.required">Department head approving this project is required</p>
              </div>
            </div>
          </div>

          <div class="row">
              <div class="col-md-6" data-ng-controller="DateController">
                  <label mean-token="'create-dt'" class="control-label">Requested Completion Date<span class="error">*</span></label>
                  <div class="input-group">
                    <input type="text" class="form-control" datepicker-popup="MM.dd.yyyy" ng-model="$parent.dt" is-open="opened" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" required/>
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                    </span>
                  </div>
              </div>
          </div>


      </div>


    </div>

    <br>
    <h5 class="text-center">Project Items</h5>
    <div class="row">
      <small class="col-md-offset-4 col-md-4 text-center">You can add one or multiple items to your project. Just choose a category from the dropdown below and click "add".</small>
    </div>
    <hr>

    <div class="itemCtrl" data-ng-controller="ModalController">
      <div class="row">
        <div class="col-md-offset-4 col-md-4">
          <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <div class="btn-group" dropdown is-open="status.isopen" on-toggle="toggled(open)">
                <button type="button" class="btn btn-primary dropdown-toggle">
                  <span data-ng-show="modalType === null">Choose Item <span class="caret"></span></span>
                  <span data-ng-show="modalType !== null">{{modalType.name}} <span class="caret"></span></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                  <li data-ng-repeat="choice in items">
                    <a ng-click="choose(choice.name, choice.template, choice.department)">{{choice.name}}</a>
                  </li>
                </ul>
              </div>
              <a class="btn btn-default" ng-click="open(modalType.template, 'item')">Add +</a>
            </div>
          </div>
        </div>
      </div>
      <br>
      <script type="text/ng-template" id="modal-website.html">
          <form data-ng-submit="ok()">
            <div class="modal-header">
                <h3 class="modal-title">Website</h3>
            </div>
            <div class="modal-body">
                <div class="form-group">
                  <label mean-token="'create-itemTitle'" class="control-label">Title</label>
                  <div>
                    <input name="title" type="text" class="form-control" data-ng-model="item.title" id="title" placeholder="ex: Pharmacy Website" required>
                  </div>
                </div>
              
                <div class="form-group">
                  <label mean-token="'create-businessLine'" class="control-label">Business Line</label>
                  <div>
                    <input name="businessLine" type="text" class="form-control" data-ng-model="item.businessLine" id="businessLine" placeholder="ex: Positive Healthcare, OTC, FreeHivTest.net" required>
                  </div>
                </div>

                <div class="form-group">
                  <label mean-token="'create-itemUrl'" class="control-label">URL</label>
                  <div>
                    <input name="url" type="text" class="form-control" data-ng-model="item.url" id="url" placeholder="ex: http://www.freehivtest.net" required>
                  </div>
                </div>

                <div class="form-group">
                  <label mean-token="'create-itemDescription'" class="control-label">Description</label>
                  <div>
                    <textarea name="itemDescription" type="text" cols="30" rows="10" class="form-control" data-ng-model="item.description" id="itemDescription" placeholder="Please provide a description of the project item" required></textarea>
                  </div>
                </div>


                <div class="form-group">
                  <label mean-token="'create-itemContent'" class="control-label">Site Content</label>
                  <div>
                    <textarea name="itemContent" type="text" cols="30" rows="10" class="form-control" data-ng-model="item.content" id="itemContent" placeholder="Please provide content/copy for project item. Ex: about page text, contact page info" required></textarea>
                  </div>
                </div>
            </div>
            <div class="modal-footer">
                <a class="btn btn-warning" href data-ng-click="cancel()">Cancel</a><button class="btn btn-primary">Save</button>
            </div>
          </form>
      </script>

      <script type="text/ng-template" id="modal-splashpage.html">
        <form data-ng-submit="ok()">
          <div class="modal-header">
              <h3 class="modal-title">Splash Page</h3>
          </div>
          <div class="modal-body">
              <div class="form-group">
                <label mean-token="'create-itemTitle'" class="control-label">Title</label>
                <div>
                  <input name="itemTitle" type="text" class="form-control" data-ng-model="item.title" id="itemTitle" placeholder="ex: Pharmacy Website" required>
                </div>
              </div>
            
              <div class="form-group">
                <label mean-token="'create-itemBusinessLine'" class="control-label">Business Line</label>
                <div>
                  <input name="itemBusinessLine" type="text" class="form-control" data-ng-model="item.businessLine" id="itemBusinessLine" placeholder="ex: Positive Healthcare, OTC, FreeHivTest.net" required>
                </div>
              </div>

              <div class="form-group">
                <label mean-token="'create-webUrl'" class="control-label">URL</label>
                <div>
                  <input name="itemUrl" type="text" class="form-control" data-ng-model="item.url" id="itemUrl" placeholder="ex: http://www.freehivtest.net" required>
                </div>
              </div>

              <div class="form-group">
                <label mean-token="'create-itemDescription'" class="control-label">Description</label>
                <div>
                  <textarea name="itemDescription" type="text" cols="30" rows="10" class="form-control" data-ng-model="item.description" id="itemDescription" placeholder="Please provide a description of the project item" required></textarea>
                </div>
              </div>


              <div class="form-group">
                <label mean-token="'create-itemContent'" class="control-label">Splash Page Content</label>
                <div>
                  <textarea name="itemContent" type="text" cols="30" rows="10" class="form-control" data-ng-model="item.content" id="itemContent" placeholder="Please provide content/copy for project item. Ex: page text, imagery" required></textarea>
                </div>
              </div>

              <div class="form-group">
                <label mean-token="'create-itemCta'" class="control-label">Call To Action</label>
                <div>
                  <textarea name="itemCta" type="text" cols="30" rows="10" class="form-control" data-ng-model="item.cta" id="itemCta" placeholder="Please describe the splash page call to action." required></textarea>
                </div>
              </div>
          </div>
          <div class="modal-footer">
              <a class="btn btn-warning" href data-ng-click="cancel()">Cancel</a><button class="btn btn-primary">Save</button>
          </div>
        </form>
      </script>


      <script type="text/ng-template" id="modal-siteupdate.html">
        <form data-ng-submit="ok()">
          <div class="modal-header">
              <h3 class="modal-title">Site Update</h3>
          </div>
          <div class="modal-body">
              <div class="form-group">
                <label mean-token="'create-itemTitle'" class="control-label">Title</label>
                <div>
                  <input name="itemTitle" type="text" class="form-control" data-ng-model="item.title" id="itemTitle" placeholder="ex: Pharmacy Website" required>
                </div>
              </div>
            
              <div class="form-group">
                <label mean-token="'create-itemBusinessLine'" class="control-label">Business Line</label>
                <div>
                  <input name="itemBusinessLine" type="text" class="form-control" data-ng-model="item.businessLine" id="itemBusinessLine" placeholder="ex: Positive Healthcare, OTC, FreeHivTest.net" required>
                </div>
              </div>

              <div class="form-group">
                <label mean-token="'create-itemUrl'" class="control-label">URL</label>
                <div>
                  <input name="itemUrl" type="text" class="form-control" data-ng-model="item.url" id="itemUrl" placeholder="ex: http://www.freehivtest.net" required>
                </div>
              </div>

              <div class="form-group">
                <label mean-token="'create-itemDescription'" class="control-label">Description</label>
                <div>
                  <textarea name="itemDescription" type="text" cols="30" rows="10" class="form-control" data-ng-model="item.description" id="itemDescription" placeholder="Please provide a description of the project item" required></textarea>
                </div>
              </div>


              <div class="form-group">
                <label mean-token="'create-itemContent'" class="control-label">Site Content</label>
                <div>
                  <textarea name="itemContent" type="text" cols="30" rows="10" class="form-control" data-ng-model="item.content" id="itemContent" placeholder="Please provide content/copy for project item. Ex: about page text, contact page info" required></textarea>
                </div>
              </div>
          </div>
          <div class="modal-footer">
              <a class="btn btn-warning" href data-ng-click="cancel()">Cancel</a><button class="btn btn-primary">Save</button>
          </div>
        </form>
      </script>
    </div>

    <div class="info-box" data-ng-repeat="item in allProjectItems.items">
      <div class="col-md-2"><h5>{{item.subType}}</h5></div>
      <div class="col-md-4"><h5><em>Title:</em> {{item.title}}</h5></div>
      <div class="col-md-4"><h5><em>Description:</em> {{item.description}}</h5></div>
      <div class="col-md-2" data-ng-controller="ModalController">
        <span><a class="btn" data-ng-click="open(item.template, 'item', item)"><i class="glyphicon glyphicon-edit"></i></a></span>
        <span><a class="btn" data-ng-click="item.remove($index)"><i class="glyphicon glyphicon-trash"></i></a></span>
      </div>
      <div class="clearfix"></div>
    </div>
    
    <hr>
    <div class="form-group">
      <div class="col-md-offset-4 col-md-4">
        <button type="submit" class="btn btn-info btn-block">Submit</button>
      </div>
    </div>
  </form>


  
</section>
